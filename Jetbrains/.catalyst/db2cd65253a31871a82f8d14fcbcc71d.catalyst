{"title":{"en":"E. Pattern Matching","ru":"E. Сопоставление шаблонов"},"contestId":"352746","problemIndex":"E","timeLimit":{"en":"2 seconds","ru":"2 секунды"},"memLimit":{"en":"256 megabytes","ru":"256 мегабайт"},"inputFormat":{"en":"standard input","ru":"стандартный ввод"},"outputFormat":{"en":"standard output","ru":"стандартный вывод"},"problemHtml":{"en":"<p>You are given $$$n$$$ patterns $$$p_1, p_2, \\dots, p_n$$$ and $$$m$$$ strings $$$s_1, s_2, \\dots, s_m$$$. Each pattern $$$p_i$$$ consists of $$$k$$$ characters that are either lowercase Latin letters or wildcard characters (denoted by underscores). All patterns are pairwise distinct. Each string $$$s_j$$$ consists of $$$k$$$ lowercase Latin letters.</p><p>A string $$$a$$$ matches a pattern $$$b$$$ if for each $$$i$$$ from $$$1$$$ to $$$k$$$ either $$$b_i$$$ is a wildcard character or $$$b_i=a_i$$$.</p><p>You are asked to rearrange the patterns in such a way that the first pattern the $$$j$$$-th string matches is $$$p[mt_j]$$$. You are allowed to leave the order of the patterns unchanged.</p><p>Can you perform such a rearrangement? If you can, then print any valid order.</p>","ru":"<p>Вам даны $$$n$$$ шаблонов $$$p_1, p_2, \\dots, p_n$$$ и $$$m$$$ строк $$$s_1, s_2, \\dots, s_m$$$. Каждый шаблон $$$p_i$$$ состоит из $$$k$$$ символов, каждый из которых&nbsp;— это либо строчная латинская буква или символ подчеркивания. Все шаблоны попарно различны. Каждая строка $$$s_j$$$ состоит из $$$k$$$ строчных латинских букв.</p><p>Строка $$$a$$$ подходит под шаблон $$$b$$$, если для каждого $$$i$$$ от $$$1$$$ до $$$k$$$ либо $$$b_i$$$&nbsp;— это подчеркивание, либо $$$b_i=a_i$$$.</p><p>Вам требуется переупорядочить шаблоны таким образом, что первый шаблон, под который подходит $$$j$$$-я строка,&nbsp;— это $$$p[mt_j]$$$. Разрешается не изменять порядок шаблонов.</p><p>Можно ли осуществить такое переупорядочивание? Если можно, то выведите любой корректный порядок.</p>"},"inSpecsHtml":{"en":"<div class=\"section-title\">Input</div><p>The first line contains three integers $$$n$$$, $$$m$$$ and $$$k$$$ ($$$1 \\le n, m \\le 10^5$$$, $$$1 \\le k \\le 4$$$)&nbsp;— the number of patterns, the number of strings and the length of each pattern and string.</p><p>Each of the next $$$n$$$ lines contains a pattern&nbsp;— $$$k$$$ characters that are either lowercase Latin letters or underscores. All patterns are pairwise distinct.</p><p>Each of the next $$$m$$$ lines contains a string&nbsp;— $$$k$$$ lowercase Latin letters, and an integer $$$mt$$$ ($$$1 \\le mt \\le n$$$)&nbsp;— the index of the first pattern the corresponding string should match.</p>","ru":"<div class=\"section-title\">Входные данные</div><p>В первой строке записаны три целых числа $$$n$$$, $$$m$$$ and $$$k$$$ ($$$1 \\le n, m \\le 10^5$$$, $$$1 \\le k \\le 4$$$)&nbsp;— количество шаблонов, количество строк и длина каждого шаблона и строки.</p><p>В каждой из следующих $$$n$$$ строк записан шаблон&nbsp;— $$$k$$$ символов, каждый из которых&nbsp;— это либо строчная латинская буква или символ подчеркивания. Все шаблоны попарно различны. </p><p>В каждой из следующих $$$m$$$ строк записана строка&nbsp;— $$$k$$$ строчных латинских букв, и целое число $$$mt$$$ ($$$1 \\le mt \\le n$$$)&nbsp;— номер первого шаблона, под который должна подходить соответствующая строка.</p>"},"outSpecsHtml":{"en":"<div class=\"section-title\">Output</div><p>Print \"<span class=\"tex-font-style-tt\">NO</span>\" if there is no way to rearrange the patterns in such a way that the first pattern that the $$$j$$$-th string matches is $$$p[mt_j]$$$.</p><p>Otherwise, print \"<span class=\"tex-font-style-tt\">YES</span>\" in the first line. The second line should contain $$$n$$$ distinct integers from $$$1$$$ to $$$n$$$&nbsp;— the order of the patterns. If there are multiple answers, print any of them.</p>","ru":"<div class=\"section-title\">Выходные данные</div><p>Выведите «<span class=\"tex-font-style-tt\">NO</span>», если невозможно переупорядочить шаблоны так, чтобы первый шаблон, под который подходит $$$j$$$-я строка, был $$$p[mt_j]$$$.</p><p>В противном случае выведите «<span class=\"tex-font-style-tt\">YES</span>» в первой строке. Во второй строке выведите $$$n$$$ различных целых чисел от $$$1$$$ до $$$n$$$&nbsp;— порядок шаблонов. Если существует несколько ответов, выведите любой из них.</p>"},"noteHtml":{"en":"<div class=\"section-title\">Note</div><p>The order of patterns after the rearrangement in the first example is the following: </p><ul> <li> <span class=\"tex-font-style-tt\">aaaa</span> </li><li> <span class=\"tex-font-style-tt\">__b_</span> </li><li> <span class=\"tex-font-style-tt\">ab__</span> </li><li> <span class=\"tex-font-style-tt\">_bcd</span> </li><li> <span class=\"tex-font-style-tt\">_b_d</span> </li></ul><p>Thus, the first string matches patterns <span class=\"tex-font-style-tt\">ab__</span>, <span class=\"tex-font-style-tt\">_bcd</span>, <span class=\"tex-font-style-tt\">_b_d</span> in that order, the first of them is <span class=\"tex-font-style-tt\">ab__</span>, that is indeed $$$p[4]$$$. The second string matches <span class=\"tex-font-style-tt\">__b_</span> and <span class=\"tex-font-style-tt\">ab__</span>, the first of them is <span class=\"tex-font-style-tt\">__b_</span>, that is $$$p[2]$$$. The last string matches <span class=\"tex-font-style-tt\">_bcd</span> and <span class=\"tex-font-style-tt\">_b_d</span>, the first of them is <span class=\"tex-font-style-tt\">_bcd</span>, that is $$$p[5]$$$.</p><p>The answer to that test is not unique, other valid orders also exist.</p><p>In the second example <span class=\"tex-font-style-tt\">cba</span> doesn't match <span class=\"tex-font-style-tt\">__c</span>, thus, no valid order exists.</p><p>In the third example the order (<span class=\"tex-font-style-tt\">a_</span>, <span class=\"tex-font-style-tt\">_b</span>) makes both strings match pattern $$$1$$$ first and the order (<span class=\"tex-font-style-tt\">_b</span>, <span class=\"tex-font-style-tt\">a_</span>) makes both strings match pattern $$$2$$$ first. Thus, there is no order that produces the result $$$1$$$ and $$$2$$$.</p>","ru":"<div class=\"section-title\">Примечание</div><p>Порядок шаблонов в первом примере после переупорядочивания: </p><ul> <li> <span class=\"tex-font-style-tt\">aaaa</span> </li><li> <span class=\"tex-font-style-tt\">__b_</span> </li><li> <span class=\"tex-font-style-tt\">ab__</span> </li><li> <span class=\"tex-font-style-tt\">_bcd</span> </li><li> <span class=\"tex-font-style-tt\">_b_d</span> </li></ul><p>Тогда первая строка подходит под шаблоны <span class=\"tex-font-style-tt\">ab__</span>, <span class=\"tex-font-style-tt\">_bcd</span>, <span class=\"tex-font-style-tt\">_b_d</span> в таком порядке, первый из них равен <span class=\"tex-font-style-tt\">ab__</span>, который действительно $$$p[4]$$$. Вторая строка подходит под шаблоны <span class=\"tex-font-style-tt\">__b_</span> и <span class=\"tex-font-style-tt\">ab__</span>, первый из них <span class=\"tex-font-style-tt\">__b_</span>, который равен $$$p[2]$$$. Последняя строка подходит под шаблоны <span class=\"tex-font-style-tt\">_bcd</span> и <span class=\"tex-font-style-tt\">_b_d</span>, первый из них <span class=\"tex-font-style-tt\">_bcd</span>, который равен $$$p[5]$$$.</p><p>Ответ на этот тест не единственный, другие корректные порядки существуют.</p><p>Во втором примере <span class=\"tex-font-style-tt\">cba</span> не подходит под шаблон <span class=\"tex-font-style-tt\">__c</span>, а значит, корректного порядка не существует.</p><p>В третьем примере в порядке (<span class=\"tex-font-style-tt\">a_</span>, <span class=\"tex-font-style-tt\">_b</span>) получается, что первый шаблон под который подходят обе строки&nbsp;— это $$$1$$$, а в порядке (<span class=\"tex-font-style-tt\">_b</span>, <span class=\"tex-font-style-tt\">a_</span>) получается, что первый шаблон под который подходят обе строки&nbsp;— это $$$2$$$. Значит, не существует такого порядка, что ответ равен $$$1$$$ и $$$2$$$.</p>"},"sampleTestcases":[{"id":1635980822572,"input":"5 3 4\n_b_d\n__b_\naaaa\nab__\n_bcd\nabcd 4\nabba 2\ndbcd 5","output":"YES\n3 2 4 5 1 \n","result":{"id":1635980822572,"stdout":"YES\n2 3 4 5 1 \n","stderr":"","exitcode":0,"signal":null,"time":13,"timeout":false}},{"id":1635980822573,"input":"1 1 3\n__c\ncba 1\n","output":"NO\n","result":{"id":1635980822573,"stdout":"NO\n","stderr":"","exitcode":0,"signal":null,"time":19,"timeout":false}},{"id":1635980822574,"input":"2 2 2\na_\n_b\nab 1\nab 2\n","output":"NO\n","result":{"id":1635980822574,"stdout":"NO\n","stderr":"","exitcode":0,"signal":null,"time":11,"timeout":false}}],"submitUrl":"https://codeforces.com/group/KIrM1Owd8u/contest/352746/submit","language":"c++","isPartOfContest":true,"langId":"54"}