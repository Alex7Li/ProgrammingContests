{"title":{"en":"G. Death DBMS","ru":"G. СУБД смерти"},"contestId":"352746","problemIndex":"G","timeLimit":{"en":"2 seconds","ru":"2 секунды"},"memLimit":{"en":"512 megabytes","ru":"512 мегабайт"},"inputFormat":{"en":"standard input","ru":"стандартный ввод"},"outputFormat":{"en":"standard output","ru":"стандартный вывод"},"problemHtml":{"en":"<p>For the simplicity, let's say that the \"Death Note\" is a notebook that kills a person when their name is written in it.</p><p>It's easy to kill with it, but it's pretty hard to keep track of people you haven't killed and still plan to. You decided to make a \"Death Database Management System\"&nbsp;— a computer program that provides the easy access to the database of possible victims. Let me describe its specifications to you.</p><p>Let's define a victim entity: a victim has a name (not necessarily unique) that consists only of lowercase Latin letters and an integer suspicion value.</p><p>At the start of the program the user enters a list of $$$n$$$ victim names into a database, each suspicion value is set to $$$0$$$.</p><p>Then the user makes queries of two types: </p><ul> <li> $$$1~i~x$$$&nbsp;— set the suspicion value of the $$$i$$$-th victim to $$$x$$$; </li><li> $$$2~q$$$&nbsp;— given a string $$$q$$$ find the maximum suspicion value of a victim whose name is a contiguous substring of $$$q$$$. </li></ul><p>Just to remind you, this program doesn't kill people, it only helps to search for the names to write down in an actual notebook. Thus, the list of the victims in the database doesn't change throughout the queries.</p><p>What are you waiting for? Write that program now!</p>","ru":"<p>Для простоты скажем, что «Тетрадь смерти»&nbsp;— это блокнот, который убивает того, чье имя в него вписывается.</p><p>С помощью него легко убивать, но довольно сложно поддерживать актуальную информацию о тех людях, кого вы еще не убили, но планируете. Поэтому вы решили создать «Систему управления базой данных смерти»&nbsp;— компьютерную программу, которая предоставляет удобный доступ к базе данных возможных жертв. Позвольте мне описать ее особенности.</p><p>Определим объект жертвы: у жертвы есть имя (необязательно уникальное), которое состоит только из строчных латинских букв, и целое значение подозрительности.</p><p>В начале программы пользователь вводит список из $$$n$$$ жертв в базу данных, значение подозрительности каждого устанавливается равным $$$0$$$.</p><p>Затем пользователь делает запросы двух типов: </p><ul> <li> $$$1~i~x$$$&nbsp;— выставить значение подозрительности $$$i$$$-й жертвы равным $$$x$$$; </li><li> $$$2~q$$$&nbsp;— по заданной строке $$$q$$$ найти максимальное значение подозрительности жертвы, чье имя входит в $$$q$$$ как подстрока (символы на подряд идущих позициях). </li></ul><p>Просто напоминаю, что программа не убивает людей, она только помогает искать их имена для записи в настоящую тетрадь. Поэтому список жертв в базе данных не меняется на протяжении всех запросов.</p><p>Ну и чего вы ждете? Напишите эту программу!</p>"},"inSpecsHtml":{"en":"<div class=\"section-title\">Input</div><p>The first line contains two integers $$$n$$$ and $$$m$$$ ($$$1 \\le n, m \\le 3 \\cdot 10^5$$$)&nbsp;— the number of victims and the number of queries, respectively.</p><p>Each of the next $$$n$$$ lines contains a single string $$$s_i$$$&nbsp;— the name of the $$$i$$$-th victim. Each name consists only of lowercase Latin letters.</p><p>Each of the next $$$m$$$ lines contains a query of one of two types: </p><ul> <li> $$$1~i~x$$$ ($$$1 \\le i \\le n$$$, $$$0 \\le x \\le 10^9$$$)&nbsp;— change the suspicion value of the $$$i$$$-th victim to $$$x$$$; </li><li> $$$2~q$$$&nbsp;— given a string $$$q$$$ consisting only of lowercase Latin letters find the maximum suspicion value of a victim whose name is a contiguous substring of $$$q$$$. </li></ul><p>There is at least one query of the second type. The total length of the strings $$$s_i$$$ doesn't exceed $$$3 \\cdot 10^5$$$. The total length of the strings $$$q$$$ doesn't exceed $$$3 \\cdot 10^5$$$. </p>","ru":"<div class=\"section-title\">Входные данные</div><p>В первой строке записаны два целых числа $$$n$$$ и $$$m$$$ ($$$1 \\le n, m \\le 3 \\cdot 10^5$$$)&nbsp;— количество жертв и количество запросов, соответственно.</p><p>В каждой из следующих $$$n$$$ строк записано по одному слову $$$s_i$$$&nbsp;— имя $$$i$$$-й жертвы. Каждое имя состоит только из строчных латинских букв.</p><p>В каждой из следующих $$$m$$$ строк записан запрос одного из двух типов: </p><ul> <li> $$$1~i~x$$$ ($$$1 \\le i \\le n$$$, $$$0 \\le x \\le 10^9$$$)&nbsp;— выставить значение подозрительности $$$i$$$-й жертвы равным $$$x$$$; </li><li> $$$2~q$$$&nbsp;— по заданной строке $$$q$$$, состоящей только из строчных латинских букв, найти максимальное значение подозрительности жертвы, чье имя входит в $$$q$$$ как подстрока (символы на подряд идущих позициях). </li></ul><p>Есть хотя бы один запрос второго типа. Суммарная длина строк $$$s_i$$$ не превосходит $$$3 \\cdot 10^5$$$. Суммарная длина строк $$$q$$$ не превосходит $$$3 \\cdot 10^5$$$.</p>"},"outSpecsHtml":{"en":"<div class=\"section-title\">Output</div><p>For each query of the second type print an integer value. If there is no victim name that is a contiguous substring of $$$q$$$, then print $$$-1$$$. Otherwise, print the maximum suspicion value of a victim whose name is a contiguous substring of $$$q$$$.</p>","ru":"<div class=\"section-title\">Выходные данные</div><p>На каждый запрос второго типа выведите одно целое число. Если нет такой жертвы, чье имя является подстрокой $$$q$$$, то выведите $$$-1$$$. Иначе выведите максимальное значение подозрительности жертвы, чье имя входит в $$$q$$$ как подстрока.</p>"},"noteHtml":{"en":null,"ru":null},"sampleTestcases":[{"id":1635980825418,"input":"5 8\nkurou\ntakuo\ntakeshi\nnaomi\nshingo\n2 nakiraomi\n2 abanaomicaba\n1 3 943\n2 takuotakeshishingo\n1 5 135832\n2 shingotakeshi\n1 5 0\n2 shingotakeshi\n","output":"-1\n0\n943\n135832\n943\n"},{"id":1635980825419,"input":"6 15\na\nab\nba\nb\na\nba\n2 aa\n1 4 4\n2 bbb\n1 2 1\n1 2 18\n2 b\n2 c\n1 6 10\n2 aba\n2 abbbba\n1 2 12\n2 bbaaab\n1 1 11\n1 5 5\n2 baa\n","output":"0\n4\n4\n-1\n18\n18\n12\n11\n"}],"submitUrl":"https://codeforces.com/group/KIrM1Owd8u/contest/352746/submit","language":"c++","isPartOfContest":true}